syntax = "proto3";

service cliente_name {
    rpc enviar_metadata (informacion_archivo ) returns (metadata);
    rpc pedir_metadata (peticion) returns (lista_bloques);
}

message peticion {
    string archivo = 1;
    string password = 2;
}

message lista_bloques {
    repeated lista dir_bloques = 1;
}

message lista {
    repeated string dir_bloques = 1;
}

message informacion_archivo  {
    string nombre_archivo = 1;
    int32 numero_bloques = 2;
    string password = 3;
}

message metadata {
    repeated string message = 1;
}

service cliente_data {
    rpc enviar_bloques (informacion_bloque) returns (confirmacion);
    rpc recibir_bloques (peticion_bloque) returns (respuesta_bloque);
}

message peticion_bloque {
    string nombre_archivo = 1;
    string nombre_bloque = 2;
}


message respuesta_bloque {
    bytes bloque = 1;
}

message informacion_bloque {
    bytes bloque = 1;
    string id = 2;
    string nombre = 3;
}

message confirmacion {
    string message = 1;
}